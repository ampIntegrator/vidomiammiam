const posts = [
  {
    title: "Guide Complet du SEO en 2025",
    slug: "guide-seo-2025",
    sections: [
      {
        h2: "Comprendre les Bases du SEO",
        paragraphs: [
          "Le référencement naturel (SEO) est l'art d'optimiser votre site web pour les moteurs de recherche. En 2025, les algorithmes sont plus sophistiqués que jamais.",
          "Google analyse maintenant des centaines de signaux pour déterminer le classement de votre site. La qualité du contenu reste le facteur le plus important.",
          "Les mises à jour régulières de l'algorithme nécessitent une veille constante et une adaptation rapide de votre stratégie SEO.",
          "Investir dans le SEO offre un retour sur investissement durable comparé aux publicités payantes qui s'arrêtent dès que vous cessez de payer."
        ]
      },
      {
        h2: "Optimisation Technique du Site",
        paragraphs: [
          "La vitesse de chargement est cruciale. Un site qui charge en moins de 2 secondes a un taux de conversion nettement supérieur.",
          "L'architecture de votre site doit être logique et faciliter la navigation tant pour les utilisateurs que pour les robots d'indexation.",
          "Les Core Web Vitals sont devenus des métriques essentielles que Google utilise pour évaluer l'expérience utilisateur."
        ]
      },
      {
        h2: "Stratégie de Contenu Efficace",
        paragraphs: [
          "Créer du contenu de qualité qui répond aux intentions de recherche de votre audience est la clé du succès en SEO.",
          "La recherche de mots-clés doit être approfondie et basée sur des données réelles de recherche.",
          "Le contenu long-format (plus de 2000 mots) performe généralement mieux dans les résultats de recherche.",
          "La mise à jour régulière de votre contenu existant est aussi importante que la création de nouveaux articles."
        ]
      },
      {
        h2: "Link Building et Autorité",
        paragraphs: [
          "Les backlinks de qualité restent un signal majeur pour Google. Privilégiez la qualité à la quantité.",
          "Une stratégie de netlinking naturelle prend du temps mais offre des résultats durables.",
          "Le guest blogging sur des sites autoritaires dans votre niche est une excellente façon d'obtenir des liens."
        ]
      },
      {
        h2: "Mesure et Analyse des Résultats",
        paragraphs: [
          "Google Analytics et Search Console sont vos outils indispensables pour suivre vos performances SEO.",
          "Définissez des KPIs clairs : trafic organique, taux de conversion, positionnement sur mots-clés stratégiques.",
          "L'analyse régulière de vos données vous permet d'ajuster votre stratégie et d'optimiser votre ROI.",
          "Les tests A/B sur vos pages importantes peuvent révéler des opportunités d'amélioration significatives."
        ]
      }
    ],
    imageUrl: "https://images.unsplash.com/photo-1432888622747-4eb9a8f2c293?w=1920&h=1280&fit=crop"
  },
  {
    title: "Marketing Digital : Stratégies Gagnantes 2025",
    slug: "marketing-digital-strategies-2025",
    sections: [
      {
        h2: "Tendances du Marketing Digital",
        paragraphs: [
          "Le marketing digital évolue à une vitesse folle. L'intelligence artificielle transforme radicalement nos approches marketing.",
          "La personnalisation à grande échelle devient possible grâce aux nouvelles technologies et à l'analyse prédictive.",
          "Les consommateurs attendent des expériences fluides sur tous les canaux : omnichannel est devenu la norme.",
          "La transparence et l'authenticité sont maintenant des exigences, pas seulement des avantages concurrentiels."
        ]
      },
      {
        h2: "Social Media Marketing Avancé",
        paragraphs: [
          "TikTok et Instagram Reels dominent le contenu vidéo court. Les marques doivent adapter leur stratégie de contenu.",
          "Le social commerce permet d'acheter directement depuis les plateformes sociales, réduisant les frictions.",
          "Les micro-influenceurs offrent souvent un meilleur ROI que les grandes célébrités grâce à leur audience engagée."
        ]
      },
      {
        h2: "Email Marketing et Automation",
        paragraphs: [
          "L'email marketing reste l'un des canaux les plus rentables avec un ROI moyen de 42:1.",
          "L'automation permet d'envoyer le bon message au bon moment sans intervention manuelle constante.",
          "La segmentation avancée de votre base de données améliore drastiquement les taux d'ouverture et de conversion.",
          "Les emails transactionnels ont des taux d'ouverture exceptionnels et doivent être optimisés."
        ]
      },
      {
        h2: "Data-Driven Marketing",
        paragraphs: [
          "Les décisions basées sur les données surpassent systématiquement l'intuition seule.",
          "Les outils d'analytics modernes permettent de suivre le parcours client sur tous les points de contact.",
          "Le marketing prédictif utilise l'IA pour anticiper les comportements et optimiser les campagnes."
        ]
      },
      {
        h2: "ROI et Mesure de Performance",
        paragraphs: [
          "Mesurer le retour sur investissement de chaque canal marketing est essentiel pour optimiser votre budget.",
          "Les modèles d'attribution multi-touch donnent une vision plus précise de la contribution de chaque canal.",
          "Les dashboards en temps réel permettent d'ajuster rapidement les campagnes sous-performantes.",
          "Le coût d'acquisition client (CAC) doit toujours être inférieur à la valeur vie client (LTV)."
        ]
      }
    ],
    imageUrl: "https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=1920&h=1280&fit=crop"
  },
  {
    title: "Développement Web : Technologies Incontournables",
    slug: "developpement-web-technologies-2025",
    sections: [
      {
        h2: "Frameworks JavaScript Modernes",
        paragraphs: [
          "React, Vue et Svelte continuent de dominer le développement front-end avec leurs approches distinctes.",
          "Next.js et Nuxt.js offrent des solutions complètes pour le rendu côté serveur et la génération statique.",
          "Le choix du framework dépend de votre projet, de votre équipe et de vos besoins en performance.",
          "La courbe d'apprentissage est un facteur important à considérer lors du choix d'une technologie."
        ]
      },
      {
        h2: "TypeScript et Sécurité du Code",
        paragraphs: [
          "TypeScript est devenu incontournable pour les projets JavaScript de moyenne et grande taille.",
          "Le typage statique permet de détecter les erreurs avant l'exécution et améliore la maintenabilité du code.",
          "L'intégration avec les IDEs modernes offre une expérience de développement exceptionnelle avec autocomplétion intelligente."
        ]
      },
      {
        h2: "Performance et Optimisation",
        paragraphs: [
          "Les Core Web Vitals de Google sont devenus des métriques essentielles pour l'expérience utilisateur.",
          "Le lazy loading et le code splitting permettent de réduire drastiquement les temps de chargement initiaux.",
          "L'utilisation de CDN et la mise en cache intelligente améliorent les performances globales.",
          "L'optimisation des images avec des formats modernes comme WebP et AVIF est cruciale."
        ]
      },
      {
        h2: "Architecture et Scalabilité",
        paragraphs: [
          "Une architecture bien pensée dès le départ évite des refactorisations coûteuses plus tard.",
          "Les microservices offrent flexibilité et scalabilité mais ajoutent de la complexité.",
          "Le serverless simplifie le déploiement et réduit les coûts d'infrastructure pour certains cas d'usage."
        ]
      },
      {
        h2: "Sécurité Web et Bonnes Pratiques",
        paragraphs: [
          "La sécurité doit être intégrée dès le début du développement, pas ajoutée après coup.",
          "Les attaques XSS, CSRF et injection SQL restent des menaces courantes qu'il faut prévenir.",
          "L'authentification robuste avec JWT ou OAuth 2.0 protège les données de vos utilisateurs.",
          "Les audits de sécurité réguliers et les mises à jour des dépendances sont essentiels."
        ]
      }
    ],
    imageUrl: "https://images.unsplash.com/photo-1498050108023-c5249f4df085?w=1920&h=1280&fit=crop"
  },
  {
    title: "Growth Hacking : Techniques de Croissance Rapide",
    slug: "growth-hacking-techniques",
    sections: [
      {
        h2: "Qu'est-ce que le Growth Hacking",
        paragraphs: [
          "Le growth hacking combine marketing, data et créativité pour générer une croissance rapide et mesurable.",
          "Contrairement au marketing traditionnel, le growth hacking privilégie l'expérimentation rapide et l'itération.",
          "Les startups à succès comme Dropbox, Airbnb et Uber ont toutes utilisé des techniques de growth hacking.",
          "L'état d'esprit growth hacker nécessite curiosité, créativité et une obsession des métriques."
        ]
      },
      {
        h2: "Acquisition Virale d'Utilisateurs",
        paragraphs: [
          "Le marketing viral repose sur la création de mécanismes qui incitent les utilisateurs à inviter d'autres utilisateurs.",
          "Le coefficient viral (K-factor) mesure combien de nouveaux utilisateurs chaque utilisateur apporte.",
          "Les programmes de parrainage avec incentives peuvent accélérer exponentiellement votre croissance."
        ]
      },
      {
        h2: "Optimisation du Funnel de Conversion",
        paragraphs: [
          "Chaque étape du funnel doit être mesurée et optimisée individuellement pour maximiser les conversions.",
          "L'onboarding est critique : 40% des utilisateurs n'utilisent une app qu'une seule fois.",
          "Les tests A/B continus permettent d'améliorer progressivement chaque élément du parcours utilisateur.",
          "La réduction des frictions lors de l'inscription peut multiplier vos conversions par 2 ou 3."
        ]
      },
      {
        h2: "Stratégies de Rétention",
        paragraphs: [
          "Acquérir un nouveau client coûte 5 fois plus cher que de retenir un client existant.",
          "Les notifications push, emails et in-app messages doivent être personnalisés et contextuels.",
          "La gamification peut augmenter l'engagement en rendant l'utilisation du produit plus ludique."
        ]
      },
      {
        h2: "Analytics et Métriques Clés",
        paragraphs: [
          "Les métriques pirates (AARRR) - Acquisition, Activation, Rétention, Revenus, Referral - structurent votre analyse.",
          "Le taux de churn mensuel doit être surveillé de près et constamment optimisé.",
          "La lifetime value (LTV) par rapport au coût d'acquisition (CAC) détermine la viabilité de votre modèle.",
          "Les cohortes d'utilisateurs révèlent des patterns invisibles dans les données agrégées."
        ]
      }
    ],
    imageUrl: "https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=1920&h=1280&fit=crop"
  },
  {
    title: "E-commerce : Optimiser Votre Boutique en Ligne",
    slug: "ecommerce-optimisation-boutique",
    sections: [
      {
        h2: "UX et Design pour l'E-commerce",
        paragraphs: [
          "L'expérience utilisateur est directement corrélée au taux de conversion. Un site confus fait fuir les clients.",
          "La navigation doit être intuitive avec une recherche performante et des filtres pertinents.",
          "Les fiches produits détaillées avec photos de qualité et descriptions complètes réduisent les retours.",
          "Le processus de checkout doit être simplifié au maximum - chaque étape supplémentaire perd 20% des clients."
        ]
      },
      {
        h2: "Stratégies de Prix et Promotions",
        paragraphs: [
          "Le pricing psychologique (9,99€ au lieu de 10€) fonctionne toujours malgré son usage répandu.",
          "Les promotions limitées dans le temps créent un sentiment d'urgence qui stimule les achats.",
          "Les codes promo et les programmes de fidélité augmentent la valeur vie client."
        ]
      },
      {
        h2: "Logistique et Fulfillment",
        paragraphs: [
          "La livraison rapide est devenue un standard grâce à Amazon. Les clients attendent maintenant la livraison en 24-48h.",
          "La transparence sur les frais de port et les délais évite les abandons de panier.",
          "Un processus de retour simple rassure les clients et augmente paradoxalement les ventes.",
          "L'automatisation de la gestion des stocks évite les ruptures qui frustrent les clients."
        ]
      },
      {
        h2: "Marketing E-commerce",
        paragraphs: [
          "Les campagnes de retargeting convertissent les visiteurs qui ont abandonné leur panier.",
          "Le SEO e-commerce nécessite une optimisation spécifique des fiches produits et catégories.",
          "Les marketplaces comme Amazon peuvent être un canal complémentaire à votre site."
        ]
      },
      {
        h2: "Analytics et Optimisation",
        paragraphs: [
          "Le taux d'abandon de panier moyen est de 70% - une mine d'opportunités d'optimisation.",
          "Les heatmaps révèlent comment les utilisateurs interagissent réellement avec vos pages.",
          "L'analyse du parcours client identifie les points de friction qui font perdre des ventes.",
          "Les tests A/B sur les pages produits et checkout peuvent augmenter les conversions de 20-50%."
        ]
      }
    ],
    imageUrl: "https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=1920&h=1280&fit=crop"
  },
  {
    title: "Content Marketing : Créer du Contenu Qui Convertit",
    slug: "content-marketing-strategies",
    sections: [
      {
        h2: "Stratégie de Contenu Gagnante",
        paragraphs: [
          "Le content marketing génère 3 fois plus de leads que le marketing traditionnel pour un coût 62% inférieur.",
          "Une stratégie de contenu efficace commence par comprendre profondément votre audience cible.",
          "Le calendrier éditorial assure une publication régulière et une cohérence thématique.",
          "La diversification des formats (articles, vidéos, podcasts, infographies) touche différents segments d'audience."
        ]
      },
      {
        h2: "SEO et Contenu Optimisé",
        paragraphs: [
          "Chaque contenu doit cibler des mots-clés spécifiques tout en restant naturel et utile pour le lecteur.",
          "La structure avec titres H2/H3, listes et paragraphes courts améliore la lisibilité et le SEO.",
          "Les contenus longs et approfondis (2000+ mots) se classent généralement mieux dans Google."
        ]
      },
      {
        h2: "Distribution et Promotion",
        paragraphs: [
          "Créer du contenu exceptionnel ne suffit pas - il faut le promouvoir activement.",
          "Les réseaux sociaux, l'email marketing et le paid promotion amplifient la portée de votre contenu.",
          "Le guest blogging sur des sites autoritaires apporte trafic et backlinks de qualité.",
          "La republication sur Medium, LinkedIn Articles élargit votre audience sans effort supplémentaire."
        ]
      },
      {
        h2: "Engagement et Communauté",
        paragraphs: [
          "Répondre aux commentaires et créer des discussions renforce la relation avec votre audience.",
          "Le contenu généré par les utilisateurs (UGC) est authentique et créé de l'engagement.",
          "Les communautés en ligne autour de votre marque deviennent des ambassadeurs."
        ]
      },
      {
        h2: "Mesure du ROI du Contenu",
        paragraphs: [
          "Tracking des métriques clés : trafic, temps passé, taux de conversion, leads générés.",
          "L'attribution multi-touch révèle comment le contenu influence le parcours d'achat.",
          "Le contenu evergreen continue de générer du trafic et des leads pendant des années.",
          "L'analyse régulière permet d'identifier les types de contenu les plus performants."
        ]
      }
    ],
    imageUrl: "https://images.unsplash.com/photo-1455849318743-b2233052fcff?w=1920&h=1280&fit=crop"
  },
  {
    title: "Intelligence Artificielle en Marketing",
    slug: "ia-marketing-applications",
    sections: [
      {
        h2: "L'IA Transforme le Marketing",
        paragraphs: [
          "L'intelligence artificielle révolutionne chaque aspect du marketing digital, de la création à l'analyse.",
          "Les outils IA permettent maintenant de personnaliser l'expérience à grande échelle pour chaque utilisateur.",
          "ChatGPT et les LLMs transforment la création de contenu et le service client.",
          "Les marketeurs qui adoptent l'IA gagnent un avantage concurrentiel significatif."
        ]
      },
      {
        h2: "Personnalisation Intelligente",
        paragraphs: [
          "Les algorithmes de recommandation augmentent les ventes en suggérant des produits pertinents.",
          "Le contenu dynamique adapte automatiquement les messages en fonction du profil utilisateur.",
          "Les chatbots IA offrent un support 24/7 et qualifient les leads automatiquement."
        ]
      },
      {
        h2: "Création de Contenu Assistée par IA",
        paragraphs: [
          "Les outils comme ChatGPT, Jasper ou Copy.ai accélèrent la production de contenu marketing.",
          "L'IA génère des variations pour les tests A/B, optimisant continuellement les messages.",
          "La création d'images avec Midjourney ou DALL-E réduit les coûts de production visuelle.",
          "L'humain reste essentiel pour la stratégie, la créativité et le contrôle qualité."
        ]
      },
      {
        h2: "Analytics Prédictifs",
        paragraphs: [
          "Les modèles de machine learning prédisent quels leads sont les plus susceptibles de convertir.",
          "L'analyse prédictive du churn permet d'intervenir avant que les clients ne partent.",
          "L'optimisation automatique des enchères publicitaires maximise le ROI des campagnes."
        ]
      },
      {
        h2: "Défis et Éthique de l'IA",
        paragraphs: [
          "La protection des données et le respect de la vie privée sont cruciaux dans l'usage de l'IA.",
          "Les biais algorithmiques peuvent perpétuer des discriminations - la vigilance est nécessaire.",
          "La transparence sur l'utilisation de l'IA renforce la confiance des consommateurs.",
          "L'équilibre entre automation et touche humaine reste un défi majeur."
        ]
      }
    ],
    imageUrl: "https://images.unsplash.com/photo-1677442136019-21780ecad995?w=1920&h=1280&fit=crop"
  },
  {
    title: "Réseaux Sociaux : Stratégies Avancées 2025",
    slug: "reseaux-sociaux-strategies-2025",
    sections: [
      {
        h2: "Paysage des Réseaux Sociaux",
        paragraphs: [
          "Les réseaux sociaux continuent d'évoluer avec l'émergence de nouvelles plateformes et fonctionnalités.",
          "TikTok a révolutionné le contenu vidéo court, forçant Instagram et YouTube à s'adapter.",
          "LinkedIn est devenu la plateforme B2B incontournable avec un engagement en forte croissance.",
          "La diversification sur plusieurs plateformes réduit la dépendance aux algorithmes d'une seule."
        ]
      },
      {
        h2: "Création de Contenu Viral",
        paragraphs: [
          "Le contenu authentique et émotionnel performe mieux que le contenu trop policé.",
          "Les formats vidéo courts (15-60 secondes) dominent avec les Reels et TikToks.",
          "Le storytelling captivant dans les premières 3 secondes est crucial pour retenir l'attention."
        ]
      },
      {
        h2: "Influence Marketing et Collaborations",
        paragraphs: [
          "Les nano et micro-influenceurs (1K-100K followers) offrent souvent le meilleur ROI.",
          "L'authenticité de la collaboration est essentielle - les audiences détectent les partenariats forcés.",
          "Les programmes d'ambassadeurs créent des relations long-terme plus rentables.",
          "La mesure précise du ROI influence passe par des codes promo et liens trackés."
        ]
      },
      {
        h2: "Social Commerce et Ventes",
        paragraphs: [
          "Instagram Shopping et TikTok Shop transforment les réseaux en canaux de vente directs.",
          "Les lives shopping créent urgence et engagement pour booster les conversions.",
          "L'intégration fluide du paiement réduit les frictions et augmente les achats impulsifs."
        ]
      },
      {
        h2: "Community Management Efficace",
        paragraphs: [
          "Répondre rapidement aux commentaires et messages renforce la relation client.",
          "La gestion de crise sur les réseaux nécessite protocoles et réactivité.",
          "Les groupes et communautés privées créent de l'engagement et de la fidélité.",
          "L'écoute sociale (social listening) identifie tendances et opportunités."
        ]
      }
    ],
    imageUrl: "https://images.unsplash.com/photo-1611162617474-5b21e879e113?w=1920&h=1280&fit=crop"
  },
  {
    title: "Conversion Rate Optimization (CRO)",
    slug: "cro-optimisation-conversions",
    sections: [
      {
        h2: "Fondamentaux du CRO",
        paragraphs: [
          "L'optimisation du taux de conversion peut doubler vos revenus sans augmenter votre trafic.",
          "Le CRO combine psychologie, design, copywriting et analyse de données.",
          "Chaque élément de votre site influence la décision du visiteur - couleurs, textes, placement.",
          "Une amélioration de 1% du taux de conversion peut représenter des millions de revenus supplémentaires."
        ]
      },
      {
        h2: "Psychologie de la Conversion",
        paragraphs: [
          "La preuve sociale (témoignages, avis, nombre d'utilisateurs) rassure et encourage l'achat.",
          "L'urgence et la rareté (stock limité, offre temporaire) déclenchent l'action immédiate.",
          "La réciprocité - offrir de la valeur gratuite avant de demander quelque chose."
        ]
      },
      {
        h2: "Tests A/B et Expérimentation",
        paragraphs: [
          "Les tests A/B comparent deux versions pour identifier scientifiquement ce qui performe mieux.",
          "Testez un seul élément à la fois pour isoler l'impact de chaque changement.",
          "La significativité statistique nécessite suffisamment de trafic - patience est cruciale.",
          "Les tests multivariés explorent les interactions entre plusieurs variables simultanément."
        ]
      },
      {
        h2: "Optimisation des Landing Pages",
        paragraphs: [
          "Une landing page efficace a un seul objectif clair avec un call-to-action proéminent.",
          "Le message doit être cohérent avec la source de trafic pour éviter la désorientation.",
          "Les formulaires courts convertissent mieux - demandez uniquement l'essentiel."
        ]
      },
      {
        h2: "Outils et Analyse",
        paragraphs: [
          "Google Optimize, Optimizely ou VWO facilitent la mise en place de tests A/B.",
          "Les heatmaps (Hotjar, Crazy Egg) révèlent où les utilisateurs cliquent et scrollent.",
          "Les enregistrements de sessions montrent les difficultés réelles des utilisateurs.",
          "L'analyse quantitative (données) combinée au qualitatif (feedback) donne la vue complète."
        ]
      }
    ],
    imageUrl: "https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=1920&h=1280&fit=crop"
  },
  {
    title: "Analytics Web : Maîtriser Google Analytics 4",
    slug: "analytics-web-ga4-guide",
    sections: [
      {
        h2: "Introduction à GA4",
        paragraphs: [
          "Google Analytics 4 représente une refonte complète de la plateforme analytics avec focus sur l'événement.",
          "GA4 est conçu pour un monde sans cookies tiers et respectueux de la vie privée.",
          "L'intelligence artificielle et le machine learning sont intégrés pour des insights prédictifs.",
          "La transition de Universal Analytics vers GA4 est obligatoire - ne tardez pas."
        ]
      },
      {
        h2: "Configuration et Tracking",
        paragraphs: [
          "La mise en place correcte dès le début évite des mois de données inexploitables.",
          "Les événements remplacent les pageviews comme unité de mesure fondamentale.",
          "Les paramètres personnalisés enrichissent les événements avec contexte spécifique."
        ]
      },
      {
        h2: "Rapports et Analyses",
        paragraphs: [
          "Les rapports de GA4 sont plus flexibles mais nécessitent une courbe d'apprentissage.",
          "L'analyse d'exploration (Explore) permet des analyses ad-hoc sophistiquées.",
          "Les segments d'audience identifient des groupes d'utilisateurs avec comportements similaires.",
          "L'analyse du parcours utilisateur révèle les chemins de conversion réels."
        ]
      },
      {
        h2: "Conversions et Attribution",
        paragraphs: [
          "Définir correctement les événements de conversion est critique pour mesurer le succès.",
          "L'attribution basée sur les données utilise le ML pour attribuer le crédit aux touchpoints.",
          "Le tracking cross-device unifie le parcours utilisateur sur mobile, tablette et desktop."
        ]
      },
      {
        h2: "Insights Actionnables",
        paragraphs: [
          "Les données sans action ne servent à rien - focalisez sur les insights exploitables.",
          "Les alertes automatiques notifient les anomalies et opportunités en temps réel.",
          "L'intégration avec BigQuery permet analyses avancées sur données brutes.",
          "Les dashboards personnalisés centralisent les métriques clés pour décisions rapides."
        ]
      }
    ],
    imageUrl: "https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=1920&h=1280&fit=crop"
  }
]

async function downloadImage(url) {
  const response = await fetch(url)
  const arrayBuffer = await response.arrayBuffer()
  return Buffer.from(arrayBuffer)
}

function createLexicalContent(sections) {
  const children = []

  sections.forEach(section => {
    // Add H2
    children.push({
      type: 'heading',
      tag: 'h2',
      children: [{
        type: 'text',
        text: section.h2,
        format: 0,
        detail: 0,
        mode: 'normal',
        style: '',
        version: 1
      }],
      direction: 'ltr',
      format: '',
      indent: 0,
      version: 1
    })

    // Add paragraphs
    section.paragraphs.forEach(paragraph => {
      children.push({
        type: 'paragraph',
        children: [{
          type: 'text',
          text: paragraph,
          format: 0,
          detail: 0,
          mode: 'normal',
          style: '',
          version: 1
        }],
        direction: 'ltr',
        format: '',
        indent: 0,
        textFormat: 0,
        version: 1
      })
    })
  })

  return {
    root: {
      type: 'root',
      children,
      direction: 'ltr',
      format: '',
      indent: 0,
      version: 1
    }
  }
}

async function createPosts() {
  console.log('Starting to create posts...')

  for (let i = 0; i < posts.length; i++) {
    const post = posts[i]
    console.log(`\nCreating post ${i + 1}/10: ${post.title}`)

    try {
      // Download image
      console.log('  - Downloading image...')
      const imageBuffer = await downloadImage(post.imageUrl)

      // Upload to media collection
      console.log('  - Uploading to media collection...')
      const formData = new FormData()
      const blob = new Blob([imageBuffer], { type: 'image/jpeg' })
      formData.append('file', blob, `post-${post.slug}.jpg`)
      formData.append('alt', post.title)

      const mediaResponse = await fetch('http://localhost:3000/api/media', {
        method: 'POST',
        headers: {
          'Authorization': 'users API-Key admin@upto1.com:Admin123!',
        },
        body: formData
      })

      if (!mediaResponse.ok) {
        throw new Error(`Media upload failed: ${await mediaResponse.text()}`)
      }

      const mediaDoc = await mediaResponse.json()
      console.log(`  - Image uploaded: ${mediaDoc.doc.id}`)

      // Create post
      console.log('  - Creating post...')
      const postData = {
        title: post.title,
        slug: post.slug,
        heroImage: mediaDoc.doc.id,
        content: createLexicalContent(post.sections),
        _status: 'published',
        publishedAt: new Date().toISOString(),
        meta: {
          title: post.title,
          description: post.sections[0].paragraphs[0].substring(0, 160),
          image: mediaDoc.doc.id
        }
      }

      const postResponse = await fetch('http://localhost:3000/api/posts', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': 'users API-Key admin@upto1.com:Admin123!',
        },
        body: JSON.stringify(postData)
      })

      if (!postResponse.ok) {
        throw new Error(`Post creation failed: ${await postResponse.text()}`)
      }

      const postDoc = await postResponse.json()
      console.log(`  ✓ Post created successfully: ${postDoc.doc.slug}`)

    } catch (error) {
      console.error(`  ✗ Error creating post ${post.title}:`, error.message)
    }
  }

  console.log('\n✓ All posts created!')
}

createPosts().catch(console.error)
